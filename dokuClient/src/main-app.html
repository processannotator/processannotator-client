
<script src="../bower_components/webcomponentsjs/webcomponents.min.js"></script>

<script src="../node_modules/pouchdb/dist/pouchdb.min.js"></script>
<script src="../node_modules/pouchdb-authentication/dist/pouchdb.authentication.min.js"></script>
<script src="../node_modules/pouchdb-all-dbs/dist/pouchdb.all-dbs.min.js"></script>
<script src="../node_modules/worker-pouch/dist/pouchdb.worker-pouch.min.js"></script>
<script src="../node_modules/pouchdb-upsert/dist/pouchdb.upsert.min.js"></script>


<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-icons/image-icons.html">
<link rel="import" href="../bower_components/iron-selector/iron-selector.html">
<!-- <link rel="import" href="../bower_components/iron-list/iron-list.html"> -->

<link rel="import" href="../bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="../bower_components/neon-animation/neon-animatable.html">
<link rel="import" href="../bower_components/neon-animation/neon-animations.html">
<link rel="import" href="../bower_components/paper-styles/paper-styles.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<!-- <link rel="import" href="../bower_components/paper-fab/paper-fab.html"> -->

<link href="main-app.css" rel="stylesheet">
<link rel="import" href="profile-setup-overlay.html">
<link rel="import" href="project-setup-overlay.html">

<link rel="import" href="render-view.html">
<link rel="import" href="dashboard.html">
<link rel="import" href="side-panel.html">



<dom-module id="main-app">

<style is="custom-style">

iron-icon {
  --iron-icon-height: 100%;
  --iron-icon-width: 2em;
}




</style>



<body>

	<template>


		<profile-setup-overlay id="profileSetupOverlay" class="fullbleed" with-backdrop auto-fit-on-attach="true">
		</profile-setup-overlay>
		<project-setup-overlay id="projectSetupOverlay" class="fullbleed" with-backdrop auto-fit-on-attach="true">
		</project-setup-overlay>

		<!-- TODO: use paper-header-panel for toggling and shit -->
		<div class="top-container">

			<div class="main-container">

				<div class="menu" id="main-menu">
					<paper-button class="menu-item appname"><span>process.</span><span style="font-weight: bold">annotator</span></paper-button>
					<paper-button id="projectMenuItem" class="menu-item" on-tap="toggleDashboard"><span>PROJECT</span></paper-button>
					<paper-button disabled class="menu-item">TOPIC</paper-button>
					<paper-button disabled class="menu-item">OBJECT</paper-button>
					<paper-button class="menu-item" on-tap="connectSensors">CONNECT SENSORS {{sensorstatus}}</paper-button>

					<paper-button class="menu-item" on-tap="resetLocalDB">Reset local DB (development)</paper-button>
				</div>


				<div id="workspace">


						<div class="menu" id="tool-menu">
							<iron-selector id="toolSelector" attr-for-selected="name" fallback-selection="none" selected="none" on-iron-select="toolChanged">
							<!-- <iron-icon class="tool-box-icon" name="none">click</iron-icon> -->
							<iron-icon class="tool-box-icon" name="polygon" src="../images/Vector-01.svg"></iron-icon>
							<iron-icon class="tool-box-icon" name="compare" src="../images/Compare-01.svg"></iron-icon>
							<iron-icon class="tool-box-icon" name="freehand" src="../images/Brush-01.svg"></iron-icon>
							<iron-icon class="tool-box-icon" name="text" src="../images/Text-01.svg"></iron-icon>
						</iron-selector>
						</div>




					<dash-board id="dashboard" remote-url="[[remoteUrl]]" on-boom="handleCreateProject" projects="[[projects]]" on-switch-project-click="handleSwitchProject" on-delete-project-click="handleDeleteProject"></dash-board>


						<!-- <div class="tutorial">
						<paper-fab hidden$="{{projectOpened}}" title="heart" icon="add" on-tap="createProject"></paper-fab>
					</div> -->

					<render-view id="renderView" annotations="[[annotations]]" on-create-annotation="addAnnotation" on-label-over="mouseOverAnnotationLabel" on-label-out="mouseOutAnnotationLabel" tool="{{objectTool}}">
					</render-view>



		</div>

	</div>

	<!--
	The side-panel manages 3 states and their animations: minimized, normal and bigger.
	The states can be evaluated to trigger extra functionality. We are checking for the `minimized` property, to show a different visualization of annotations when the side panel is minimized/narrow.
 -->
	<side-panel state="{{sidePanelState}}" minimized="{{sidePanelMinimized}}">

		<div id="annotationList" hidden$="[[sidePanelMinimized]]">
			<template is="dom-repeat" class="annotationListTemplate" items="{{annotations}}" as="item">
				<annotation-box id="annotationbox_{{item._id}}" annotation="{{item}}" index="{{index}}" on-annotation-edited-by-user="onAnnotationEdit" on-annotation-deleted-by-user="onAnnotationDelete" on-tap="annotationBoxClicked"></annotation-box>
			</template>
		</div>

		<div id="minifiedAnnotationList" hidden$="[[!sidePanelMinimized]]">
			<template is="dom-repeat" class="annotationListTemplate" items="{{annotations}}" as="item">
				<div class="annotationCircle" style="background-color:[[item.statusColor]]">
				</div>
				<br>
			</template>
		</div>

		<array-selector id="annotationSelector" items="{{annotations}}" selected="{{selectedAnnotation}}" toggle></array-selector>


</side-panel>

</div>

<div class="session-container">


	<div class="session-box"></div>
	<div class="session-box"></div>
	<div class="session-box"></div>
	<div class="session-box"></div>
	<div class="session-box"></div>
	<div class="session-box"></div>
	<div class="session-box"></div>
	<div class="session-box"></div>

	<!-- TODO: create custom web components 'session' and 'timeline' -->
	<!-- <timeline></timeline> -->
</div>

</template>


<!-- Loading the main script in the end -->
<script src="main-app-bundle.js" charset="utf-8"></script>
</dom-module>
